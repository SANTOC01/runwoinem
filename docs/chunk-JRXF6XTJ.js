import{$a as S,$b as Y,Ba as u,Ea as T,Ga as p,Jb as j,Mb as M,Oa as B,Pa as C,Qa as _,Sa as w,Ta as k,Ua as h,Va as r,W as b,Wa as o,Wb as $,X as v,Xa as z,Xb as G,Ya as P,Yb as W,Za as m,Zb as Q,_a as d,_b as U,ab as D,bb as L,db as H,dc as Z,eb as c,fb as f,ga as A,gb as q,hb as O,jb as R,kb as F,lb as I,mb as V,ra as l,va as N}from"./chunk-5YP7PA6P.js";var ne=(a,t)=>t.date+t.name;function ie(a,t){if(a&1){let e=P();r(0,"button",2),m("click",function(){b(e);let i=d().$implicit,s=d();return v(s.deleteEntry(i))}),c(1,"\u274C"),o()}}function oe(a,t){if(a&1&&(r(0,"tr")(1,"td"),c(2),o(),r(3,"td"),c(4),o(),r(5,"td"),c(6),o(),r(7,"td"),C(8,ie,2,0,"button",1),o()()),a&2){let e=t.$implicit,n=t.$index,i=d();l(2),f(e.name),l(2),O("",e.value," ",i.unit),l(2),f(i.formatDate(e.date)),l(2),_(n===0?8:-1)}}var X=class a{entries=[];unit="";deleteRequested=new p;formatDate(t){return new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"2-digit"})}deleteEntry(t){this.deleteRequested.emit(t)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=u({type:a,selectors:[["app-stats-table"]],inputs:{entries:"entries",unit:"unit"},outputs:{deleteRequested:"deleteRequested"},decls:15,vars:1,consts:[[1,"table-container"],[1,"delete-btn"],[1,"delete-btn",3,"click"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"h2"),c(2,"\u{1F4CB} Letzte Eintr\xE4ge"),o(),r(3,"table")(4,"tr")(5,"th"),c(6,"Name"),o(),r(7,"th"),c(8),o(),r(9,"th"),c(10,"Datum"),o(),r(11,"th"),c(12,"L\xF6schen"),o()(),w(13,oe,9,5,"tr",null,ne),o()()),e&2&&(l(8),f(n.unit),l(5),k(n.entries))},dependencies:[M],styles:[".table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;text-align:center;color:#2c3e50}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;table-layout:fixed;font-size:12px;border-collapse:collapse}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:center;word-wrap:normal;overflow:hidden;white-space:normal}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#2c3e50;font-weight:700}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8f9fa}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.table-container[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px 8px;border-radius:4px}.table-container[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{background-color:#ffe6e6}@media (max-width: 768px){.table-container[_ngcontent-%COMP%]{max-width:100%}}"]})};var ae=(a,t)=>t.name;function re(a,t){if(a&1&&(r(0,"tr")(1,"td"),c(2),o(),r(3,"td"),c(4),o(),r(5,"td"),c(6),o()()),a&2){let e=t.$implicit,n=t.$index,i=d();l(2),O("",i.getRankText(n,e.name)," ",i.getRankEmoji(n)),l(2),f(e.name),l(2),O("",e.value," ",i.unit)}}var J=class a{rankings=[];unit="";getRankEmoji(t){switch(t){case 0:return"\u{1F3C6}";case 1:return"\u{1F948}";case 2:return"\u{1F949}";default:return"\u{1F3C5}"}}getRankText(t,e){return t===0&&e.toLowerCase()==="max"?"Max":(t+1).toString()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=u({type:a,selectors:[["app-ranking-table"]],inputs:{rankings:"rankings",unit:"unit"},decls:13,vars:1,consts:[[1,"ranking-container"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"h2"),c(2,"\u{1F3C6} Rangliste"),o(),r(3,"table")(4,"tr")(5,"th"),c(6,"Platz"),o(),r(7,"th"),c(8,"Name"),o(),r(9,"th"),c(10),o()(),w(11,re,7,5,"tr",null,ae),o()()),e&2&&(l(10),f(n.unit),l(),k(n.rankings))},dependencies:[M],styles:[".ranking-container[_ngcontent-%COMP%]{flex:0 0 36%;background:#fff;padding:10px;border-radius:10px;box-shadow:2px 2px 10px #0000001a;overflow:auto;max-width:340px}.ranking-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;text-align:center;color:#2c3e50}.ranking-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;table-layout:fixed;font-size:12px;border-collapse:collapse}.ranking-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .ranking-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:center;word-wrap:normal;overflow:hidden;white-space:normal}.ranking-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#2c3e50;font-weight:700}.ranking-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8f9fa}.ranking-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}@media (max-width: 768px){.ranking-container[_ngcontent-%COMP%]{max-width:100%}}"]})};function se(a,t){if(a&1&&(r(0,"div",0),c(1),o()),a&2){let e=d();l(),q(" ",e.message," ")}}var K=class a{total=0;goals=[];unit="";message="";isVisible=!1;ngOnChanges(t){(t.total||t.goals)&&this.updateBanner(this.total)}updateBanner(t){if(!this.goals.length)return;let e;for(let n of this.goals)t>=n.target&&(e=n);this.message=e?`\u{1F389} Ziel erreicht: ${e.emoji} ${e.reward}!`:"Noch kein Ziel erreicht \u{1F62E}",this.isVisible=!0}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=u({type:a,selectors:[["app-goal-banner"]],inputs:{total:"total",goals:"goals",unit:"unit"},features:[A],decls:1,vars:1,consts:[[1,"banner"]],template:function(e,n){e&1&&C(0,se,2,1,"div",0),e&2&&_(n.isVisible?0:-1)},styles:[".banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fc0,#ffb347);padding:1rem;font-size:1.1rem;font-weight:700;margin:1rem auto;width:80%;max-width:600px;border-radius:10px;text-align:center;box-shadow:0 2px 4px #0000001a;animation:_ngcontent-%COMP%_slideDown .5s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}@media (max-width: 768px){.banner[_ngcontent-%COMP%]{width:90%;font-size:1rem;padding:.8rem}}"]})};var ce=["gridContainer"],le=["patternCanvas"],de=()=>[0,1,2],ue=()=>[1,2,3];function pe(a,t){if(a&1){let e=P();r(0,"button",9),m("mousedown",function(i){b(e);let s=d(2);return v(s.handleMouseDown(i))})("touchstart",function(i){b(e);let s=d(2);return v(s.handleTouchStart(i))}),o()}if(a&2){let e=t.$implicit,n=d().$implicit;B("data-value",n*3+e)}}function me(a,t){a&1&&(r(0,"div",7),T(1,pe,1,1,"button",8),o()),a&2&&(l(),h("ngForOf",V(1,ue)))}var ee=class a{constructor(t){this.toastService=t}success=new p;cancel=new p;gridContainer;canvasRef;CORRECT_PATTERN="1-4-7-8-9";inputPattern=[];isMouseDown=!1;isTouchActive=!1;lastPoint=null;buttonPositions={};boundMouseMove;boundMouseUp;boundTouchMove;boundTouchEnd;ngAfterViewInit(){this.setupCanvas(),this.setupEventListeners(),this.disableScrolling()}setupCanvas(){let t=this.canvasRef.nativeElement;t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.style.zIndex="1",this.updateCanvasSize(),this.storeButtonPositions()}setupEventListeners(){this.boundMouseMove=this.handleMouseMove.bind(this),this.boundMouseUp=this.handleMouseUp.bind(this),this.boundTouchMove=this.handleTouchMove.bind(this),this.boundTouchEnd=this.handleTouchEnd.bind(this),document.addEventListener("mousemove",this.boundMouseMove),document.addEventListener("mouseup",this.boundMouseUp),document.addEventListener("touchmove",this.boundTouchMove,{passive:!1}),document.addEventListener("touchend",this.boundTouchEnd)}disableScrolling(){document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"}handleMouseDown(t){this.resetPattern(),this.isMouseDown=!0;let e=t.target;this.addPointToPattern(e)}handleMouseMove(t){if(!this.isMouseDown)return;let n=this.gridContainer.nativeElement.getBoundingClientRect(),i=t.clientX-n.left,s=t.clientY-n.top;this.checkIntersection(i,s),this.drawLines(i,s)}handleMouseUp(){this.isMouseDown&&(this.isMouseDown=!1,this.checkPattern(),this.resetActiveButtons(),this.clearCanvas())}handleTouchStart(t){t.preventDefault(),this.resetPattern(),this.isTouchActive=!0;let e=t.touches[0],n=document.elementFromPoint(e.clientX,e.clientY);this.addPointToPattern(n)}handleTouchMove(t){if(t.preventDefault(),!this.isTouchActive)return;let e=t.touches[0],i=this.gridContainer.nativeElement.getBoundingClientRect(),s=e.clientX-i.left,g=e.clientY-i.top;this.checkIntersection(s,g),this.drawLines(s,g)}handleTouchEnd(){this.isTouchActive&&(this.isTouchActive=!1,this.checkPattern(),this.resetActiveButtons(),this.clearCanvas())}resetPattern(){this.inputPattern=[],this.lastPoint=null,this.resetActiveButtons(),this.clearCanvas()}resetActiveButtons(){this.gridContainer.nativeElement.querySelectorAll(".grid-button").forEach(e=>e.classList.remove("active"))}clearCanvas(){let t=this.canvasRef.nativeElement,e=t.getContext("2d");e&&e.clearRect(0,0,t.width,t.height)}addPointToPattern(t){let e=t?.getAttribute("data-value");e&&!this.inputPattern.includes(e)&&(this.inputPattern.push(e),t.classList.add("active"),this.lastPoint=this.buttonPositions[e],this.drawLines())}checkPattern(){this.inputPattern.join("-")===this.CORRECT_PATTERN?this.success.emit():this.inputPattern.length>0&&this.toastService.show("Muster falsch, versuche es erneut.")}onCancel(){this.cancel.emit()}ngOnDestroy(){document.removeEventListener("mousemove",this.boundMouseMove),document.removeEventListener("mouseup",this.boundMouseUp),document.removeEventListener("touchmove",this.boundTouchMove),document.removeEventListener("touchend",this.boundTouchEnd),document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}updateCanvasSize(){let t=this.canvasRef.nativeElement,e=this.gridContainer.nativeElement;t.width=e.offsetWidth,t.height=e.offsetHeight}storeButtonPositions(){this.gridContainer.nativeElement.querySelectorAll(".grid-button").forEach(e=>{let n=e.getBoundingClientRect(),i=this.gridContainer.nativeElement.getBoundingClientRect(),s=e.getAttribute("data-value");s&&(this.buttonPositions[s]={x:n.left+n.width/2-i.left,y:n.top+n.height/2-i.top})})}checkIntersection(t,e){Object.entries(this.buttonPositions).forEach(([n,i])=>{if(Math.sqrt(Math.pow(t-i.x,2)+Math.pow(e-i.y,2))<20&&!this.inputPattern.includes(n)){let g=this.gridContainer.nativeElement.querySelector(`[data-value="${n}"]`);g&&(this.inputPattern.push(n),g.classList.add("active"),this.lastPoint=i,this.drawLines())}})}drawLines(t,e){let n=this.canvasRef.nativeElement,i=n.getContext("2d");if(!i)return;i.clearRect(0,0,n.width,n.height),i.strokeStyle="#43c6ac",i.lineWidth=2,i.beginPath();let s=null;for(let g of this.inputPattern){let x=this.buttonPositions[g];s?i.lineTo(x.x,x.y):i.moveTo(x.x,x.y),s=x}s&&t!==void 0&&e!==void 0&&i.lineTo(t,e),i.stroke()}static \u0275fac=function(e){return new(e||a)(N(Z))};static \u0275cmp=u({type:a,selectors:[["app-lock-screen"]],viewQuery:function(e,n){if(e&1&&(S(ce,5),S(le,5)),e&2){let i;D(i=L())&&(n.gridContainer=i.first),D(i=L())&&(n.canvasRef=i.first)}},outputs:{success:"success",cancel:"cancel"},decls:13,vars:2,consts:[["gridContainer",""],["patternCanvas",""],[1,"unlock-popup"],[1,"unlock-content"],[1,"grid-container"],["class","grid-row",4,"ngFor","ngForOf"],[1,"unlock-cancel",3,"click"],[1,"grid-row"],["class","grid-button",3,"mousedown","touchstart",4,"ngFor","ngForOf"],[1,"grid-button",3,"mousedown","touchstart"]],template:function(e,n){if(e&1){let i=P();r(0,"div",2)(1,"div",3)(2,"h2"),c(3,"Entsperren"),o(),r(4,"p"),c(5,"Zeichne das Muster zum Entsperren"),o(),r(6,"div",4,0),z(8,"canvas",null,1),T(10,me,2,2,"div",5),o(),r(11,"button",6),m("click",function(){return b(i),v(n.onCancel())}),c(12,"Abbrechen"),o()()()}e&2&&(l(10),h("ngForOf",V(1,de)))},dependencies:[M,j],styles:["[_nghost-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;background:#00000080;display:flex;align-items:center;justify-content:center}.unlock-popup[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;z-index:1000;display:flex;justify-content:center;align-items:center}.unlock-popup[_ngcontent-%COMP%]   .unlock-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:10px;text-align:center;max-width:90%;width:300px}.unlock-popup[_ngcontent-%COMP%]   .unlock-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px}.unlock-popup[_ngcontent-%COMP%]   .unlock-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px;color:#666}.unlock-popup[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]{position:relative;margin:20px auto;width:240px;height:240px}.unlock-popup[_ngcontent-%COMP%]   .grid-row[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:20px 0}.unlock-popup[_ngcontent-%COMP%]   .grid-button[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:2px solid #ccc;background:#fff;transition:all .2s}.unlock-popup[_ngcontent-%COMP%]   .grid-button.active[_ngcontent-%COMP%]{background:#43c6ac;border-color:#43c6ac}.unlock-popup[_ngcontent-%COMP%]   .unlock-cancel[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;border:none;border-radius:5px;background:#f44336;color:#fff;cursor:pointer}.unlock-popup[_ngcontent-%COMP%]   .unlock-cancel[_ngcontent-%COMP%]:hover{background:#d32f2f}.pattern-canvas[_ngcontent-%COMP%]{pointer-events:none}.toast[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:50%;transform:translate(-50%) translateY(100px);background:#000c;color:#fff;padding:12px 24px;border-radius:4px;opacity:0;transition:all .3s ease}.toast.show[_ngcontent-%COMP%]{transform:translate(-50%) translateY(0);opacity:1}"]})};function ge(a,t){a&1&&(r(0,"p",4),c(1,"\u{1F512} Challenge beendet \u2013 danke f\xFCr eure Teilnahme!"),o())}var te=class a{config;submitted=new p;valueChanged=new p;name="";value=null;onSubmit(){this.name&&this.value!=null&&this.submitted.emit({name:this.name,value:this.value})}onValueChange(){this.name&&this.value!=null&&this.valueChanged.emit({name:this.name,value:this.value})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=u({type:a,selectors:[["app-challenge-form"]],inputs:{config:"config"},outputs:{submitted:"submitted",valueChanged:"valueChanged"},decls:6,vars:10,consts:[[1,"input-section"],["type","text","placeholder","Dein Name",3,"ngModelChange","ngModel","disabled"],["type","number",3,"ngModelChange","input","ngModel","placeholder","max","disabled"],[3,"click","disabled"],[1,"challenge-status"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"input",1),I("ngModelChange",function(s){return F(n.name,s)||(n.name=s),s}),o(),r(2,"input",2),I("ngModelChange",function(s){return F(n.value,s)||(n.value=s),s}),m("input",function(){return n.onValueChange()}),o(),r(3,"button",3),m("click",function(){return n.onSubmit()}),c(4," Absenden "),o(),C(5,ge,2,0,"p",4),o()),e&2&&(l(),R("ngModel",n.name),h("disabled",!n.config.active),l(),R("ngModel",n.value),h("placeholder",n.config.metricLabel)("max",n.config.maxEntryValue)("disabled",!n.config.active),l(),H("disabled",!n.config.active),h("disabled",!n.config.active),l(2),_(n.config.active?-1:5))},dependencies:[Y,$,Q,G,U,W],styles:[".input-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;margin-bottom:2rem;width:100%;max-width:170px;margin-left:auto;margin-right:auto}.input-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:.8rem;border:none;border-radius:8px;box-shadow:0 2px 4px #0000001a}.input-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background:#e8e8e8;color:#888;cursor:not-allowed}.input-section[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{appearance:textfield;-moz-appearance:textfield}.input-section[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, .input-section[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.input-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#43c6ac;color:#fff;cursor:pointer;transition:background .3s ease}.input-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background:#3ab19c}.input-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, .input-section[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%]{background:#b0b0b0;color:#f0f0f0;cursor:not-allowed;opacity:.7}.input-section[_ngcontent-%COMP%]   .challenge-status[_ngcontent-%COMP%]{margin:0;font-size:.8rem;color:#555;text-align:center;background:#ffffffbf;border-radius:6px;padding:.4rem .6rem;width:100%}@media (max-width: 768px){.input-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-width:300px}}"]})};export{X as a,J as b,K as c,ee as d,te as e};
