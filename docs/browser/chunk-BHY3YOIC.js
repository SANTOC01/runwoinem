import{a as L,b as B,c as F,d as q}from"./chunk-LI6XCKNP.js";import{$a as u,$b as $,Da as y,I as p,Kb as K,Lb as T,O as k,Ra as S,Sa as O,Sb as I,Tb as V,Wa as s,Xa as l,Y as b,Ya as r,Z as v,Za as d,_a as P,_b as R,ab as _,ac as U,d as o,eb as w,gb as C,hb as x,ib as M,jb as E,k as m,ob as D,pb as j,ta as a,xa as h}from"./chunk-GZDO7HLK.js";var f=class i extends R{config={id:"eurotrip-km-2025",title:"Eurotrip 1000km Challenge",active:!1,metricLabel:"Kilometer",metricUnit:"km",goalValue:1e3,maxEntryValue:200,goals:[{target:100,emoji:"\u{1F3AF}",reward:"Erste 100km!"},{target:500,emoji:"\u{1F3C5}",reward:"Halbzeit!"},{target:1e3,emoji:"\u{1F3C6}",reward:"1000km Eurotrip abgeschlossen!"}],chartProfile:[{x:0,y:0},{x:180,y:100},{x:100,y:200},{x:280,y:300},{x:200,y:400},{x:320,y:500},{x:240,y:600},{x:380,y:700},{x:260,y:800},{x:160,y:900},{x:60,y:1e3},{x:0,y:1050}],chartMaxScale:400};entriesSubject=new m([]);rankingsSubject=new m([]);totalSubject=new m(0);chartDataSubject=new m({labels:[],values:[]});entries$=this.entriesSubject.asObservable().pipe(p(1));rankings$=this.rankingsSubject.asObservable().pipe(p(1));total$=this.totalSubject.asObservable().pipe(p(1));chartData$=this.chartDataSubject.asObservable().pipe(p(1));constructor(){super()}loadData(){return o(this,null,function*(){})}submitData(n,t){return o(this,null,function*(){throw new Error("KmChallengeService.submitData() not yet implemented.")})}deleteData(n){return o(this,null,function*(){throw new Error("KmChallengeService.deleteData() not yet implemented.")})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})};function G(i,n){if(i&1){let t=P();l(0,"app-lock-screen",13),u("success",function(){b(t);let c=_();return v(c.lockService.handleUnlockSuccess())})("cancel",function(){b(t);let c=_();return v(c.lockService.handleUnlockCancel())}),r()}}var z=class i{constructor(n,t,e){this.kmChallengeService=n;this.lockService=t;this.toast=e}entries=[];rankings=[];total=0;progressPercentage=0;subscriptions=[];ngOnInit(){this.subscriptions.push(this.kmChallengeService.entries$.subscribe(n=>{this.entries=[...n].sort((t,e)=>new Date(e.date).getTime()-new Date(t.date).getTime())}),this.kmChallengeService.rankings$.subscribe(n=>{this.rankings=n}),this.kmChallengeService.total$.subscribe(n=>{this.total=n,this.progressPercentage=Math.min(Math.round(n/this.kmChallengeService.config.goalValue*100),100)}))}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}onValueChange(n){let{name:t,value:e}=n;e>this.kmChallengeService.config.maxEntryValue?this.toast.show("Sei ehrlich \u{1F925}\u{1F60F}\u{1F633}"):e>30?this.toast.show("Boaah \u{1F628}"):e>10&&this.toast.show(`Stark ${t.split(" ")[0]} \u{1F4AA}`)}onSubmit(n){return o(this,null,function*(){try{yield this.kmChallengeService.submitData(n.name,n.value)}catch(t){console.error("Error submitting data:",t)}})}onDelete(n){return o(this,null,function*(){try{yield this.kmChallengeService.deleteData(n)}catch(t){console.error("Error deleting entry:",t)}})}static \u0275fac=function(t){return new(t||i)(h(f),h($),h(U))};static \u0275cmp=y({type:i,selectors:[["app-km-challenge"]],decls:20,vars:19,consts:[[1,"challenge-container"],[1,"content-wrapper"],[1,"header"],[3,"total","goals","unit"],[3,"submitted","valueChanged","config"],[1,"data-section"],[3,"deleteRequested","entries","unit"],[3,"rankings","unit"],[1,"progress-section"],[1,"progress-header"],[1,"progress-bar"],[1,"progress"],[3,"total","config"],[3,"success","cancel"]],template:function(t,e){t&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),C(4),r(),d(5,"app-goal-banner",3),r(),l(6,"app-challenge-form",4),u("submitted",function(g){return e.onSubmit(g)})("valueChanged",function(g){return e.onValueChange(g)}),r(),l(7,"div",5)(8,"app-stats-table",6),u("deleteRequested",function(g){return e.onDelete(g)}),r(),d(9,"app-ranking-table",7),r(),l(10,"div",8)(11,"div",9)(12,"h2"),C(13),r(),l(14,"div",10)(15,"div",11),C(16),r()()(),d(17,"app-progress-chart",12),r()(),S(18,G,1,0,"app-lock-screen"),D(19,"async"),r()),t&2&&(a(4),x(e.kmChallengeService.config.title),a(),s("total",e.total)("goals",e.kmChallengeService.config.goals)("unit",e.kmChallengeService.config.metricUnit),a(),s("config",e.kmChallengeService.config),a(2),s("entries",e.entries)("unit",e.kmChallengeService.config.metricUnit),a(),s("rankings",e.rankings)("unit",e.kmChallengeService.config.metricUnit),a(4),E("\u{1F4C8} Fortschritt Gesamt: ",e.total," ",e.kmChallengeService.config.metricUnit),a(2),w("width",e.progressPercentage,"%"),a(),M(" ",e.progressPercentage,"% "),a(),s("total",e.total)("config",e.kmChallengeService.config),a(),O(j(19,17,e.lockService.showLockScreen$)?18:-1))},dependencies:[T,K,L,I,B,V,F,q],styles:[".challenge-container[_ngcontent-%COMP%]{min-height:100vh;width:100%;background:url(https://raw.githubusercontent.com/SANTOC01/gipfelstuermer-tracker/refs/heads/main/assets/mountain.jpg);background-size:cover;background-position:top;background-repeat:no-repeat;overflow-y:auto;padding-top:80px}.challenge-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);max-width:1200px;margin:0 auto;padding:2rem;position:relative;z-index:1}.challenge-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.challenge-container[_ngcontent-%COMP%]   .data-section[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:2rem;margin-bottom:2rem;padding:1rem;max-width:900px;margin-left:auto;margin-right:auto;background:#ffffffe6;border-radius:15px;box-shadow:0 4px 6px #0000001a}.challenge-container[_ngcontent-%COMP%]   .data-section[_ngcontent-%COMP%]   app-stats-table[_ngcontent-%COMP%], .challenge-container[_ngcontent-%COMP%]   .data-section[_ngcontent-%COMP%]   app-ranking-table[_ngcontent-%COMP%]{flex:1;min-width:0}.challenge-container[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]{max-width:900px;margin-left:auto;margin-right:auto;margin-bottom:2rem;padding:1.5rem;background:#fff;border-radius:15px;box-shadow:0 4px 6px #0000001a}.challenge-container[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.challenge-container[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:1rem}.challenge-container[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:100%;height:20px;background:#e0e0e0;border-radius:10px;overflow:hidden}.challenge-container[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:100%;background:#43c6ac;transition:width .3s ease;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}@media (max-width: 768px){.challenge-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}.challenge-container[_ngcontent-%COMP%]   .data-section[_ngcontent-%COMP%]{flex-direction:column}}"]})};export{z as KmChallenge};
